!function(v){"use strict";var E="ht",O=v[E],l=Math,N=l.max,m=l.min,G=l.abs,H=l.atan2,C=(l.cos,l.sin,l.ceil),d=O.Default,i=d.getInternal(),$=O.List,t=i.Mat,b=i.getNodeRect,z=i.intersectionLineRect,T=d.getDistance,R=d.setEdgeType,q="left",w="right",D="top",V="bottom",I="edge.type",s="edge.gap",J="edge.center",j="edge.extend",Z=function(n,y){return b(n,y).width},h=function(u,T){return b(u,T).height},g=function(j,B){return i.getEdgeHostPosition(j,B,"source")},f=function(B,q){return i.getEdgeHostPosition(B,q,"target")},A=function(x,T){var E=x.s(I),d=x.getEdgeGroup();if(d){var p=0;if(d.eachSiblingEdge(function(S){T.isVisible(S)&&S.s(I)==E&&p++}),p>1)return x.s(s)*(p-1)/2}return 0},e=function(w,E){var O=w.s(I),G=w.isLooped();if(!w.getEdgeGroup())return G?w.s(s):0;var t,V=0,d=0,Q=0;return w.getEdgeGroup().getSiblings().each(function(H){H.each(function(X){if(X._40I===w._40I&&X.s(I)==O&&E.isVisible(X)){var e=X.s(s);t?(d+=Q/2+e/2,Q=e):(t=X,Q=e),X===w&&(V=d)}})}),G?d-V+Q:V-d/2},p=function(J,H){var g=H.s("edge.corner.radius");return d.toRoundedCorner(J,g)};i.addMethod(O.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),R("boundary",function(m,l,I,c){c||(l=-l);var N,n=g(I,m),q=f(I,m),v=b(I,m._40I),y=b(I,m._41I),K=new t(H(q.y-n.y,q.x-n.x)),G=T(n,q),X=n.x,j=n.y;return N=K.tf(0,l),n={x:N.x+X,y:N.y+j},N=K.tf(G,l),q={x:N.x+X,y:N.y+j},N=z(n,q,v),N&&(n={x:N[0],y:N[1]}),N=z(n,q,y),N&&(q={x:N[0],y:N[1]}),{points:new $([n,q])}}),R("ripple",function(p,b,R,l){l||(b=-b);var P=g(R,p),c=f(R,p),a=T(P,c),h=m(p.s("edge.offset"),a/2),e=p.s("edge.ripple.size"),s=p.s("edge.ripple.length"),Z=p.s("edge.ripple.both"),n=p.s(J),K=p.s("edge.ripple.elevation"),Q=new $,N=p.s("edge.ripple.straight")?null:new $,D=new t(H(c.y-P.y,c.x-P.x));l||(K=-K),a-=2*h,s>0&&(e=C(a/s));var V=a/e;N&&N.add(1);for(var i=0;e>i;i++)N&&N.add(3),0===i?Q.add({x:h+V*i,y:n?0:b}):Q.add({x:h+V*i,y:b}),Q.add({x:h+V*i+V/2,y:K+b}),Z&&(K=-K);for(Q.add({x:h+a,y:n?0:b}),i=0;i<Q.size();i++){var w=D.tf(Q.get(i));w.x+=P.x,w.y+=P.y,Q.set(i,w)}return{points:Q,segments:N}}),R("h.v",function(u,r,U){r=e(u,U);var G=new $,j=u.s(J),L=g(U,u),n=L.x,v=L.y,R=f(U,u),N=R.x,M=R.y,A=u._40I instanceof O.Edge,k=u._41I instanceof O.Edge,H=0,Q=0,c=N-n,m=M-v;return j||(H=A?0:Z(U,u._40I)/2,Q=k?0:h(U,u._41I)/2),c>=0&&0>=m?(G.add({x:n+H,y:v+r}),G.add({x:N+r,y:v+r}),G.add({x:N+r,y:M+Q})):0>=c&&m>=0?(G.add({x:n-H,y:v+r}),G.add({x:N+r,y:v+r}),G.add({x:N+r,y:M-Q})):c>=0&&m>=0?(G.add({x:n+H,y:v+r}),G.add({x:N-r,y:v+r}),G.add({x:N-r,y:M-Q})):(G.add({x:n-H,y:v+r}),G.add({x:N-r,y:v+r}),G.add({x:N-r,y:M+Q})),p(G,u)}),R("v.h",function(i,G,K){G=e(i,K);var I=new $,B=i.s(J),w=g(K,i),u=w.x,S=w.y,E=f(K,i),v=E.x,q=E.y,d=i._40I instanceof O.Edge,U=i._41I instanceof O.Edge,T=0,A=0,V=v-u,m=q-S;return B||(T=U?0:Z(K,i._41I)/2,A=d?0:h(K,i._40I)/2),V>=0&&0>=m?(I.add({x:u+G,y:S-A}),I.add({x:u+G,y:q+G}),I.add({x:v-T,y:q+G})):0>=V&&m>=0?(I.add({x:u+G,y:S+A}),I.add({x:u+G,y:q+G}),I.add({x:v+T,y:q+G})):V>=0&&m>=0?(I.add({x:u-G,y:S+A}),I.add({x:u-G,y:q+G}),I.add({x:v-T,y:q+G})):(I.add({x:u-G,y:S-A}),I.add({x:u-G,y:q+G}),I.add({x:v+T,y:q+G})),p(I,i)}),R("ortho",function(I,K,D){var X=new $,V=I.s(J),A=I.s("edge.ortho"),b=I._40I,c=I._41I,L=g(D,I),Q=L.x,y=L.y,j=f(D,I),N=j.x,e=j.y,z=N-Q,v=e-y,S=b instanceof O.Edge,q=c instanceof O.Edge,m=V||S?0:Z(D,b)/2,P=V||S?0:h(D,b)/2,W=V||q?0:Z(D,c)/2,Y=V||q?0:h(D,c)/2,C=(z-(m+W)*(z>0?1:-1))*A,d=(v-(P+Y)*(v>0?1:-1))*A;return G(z)<G(v)?z>=0&&0>=v?(X.add({x:Q+K,y:y-P}),X.add({x:Q+K,y:y+d+K-P}),X.add({x:N+K,y:y+d+K-P}),X.add({x:N+K,y:e+Y})):0>=z&&v>=0?(X.add({x:Q+K,y:y+P}),X.add({x:Q+K,y:y+d+K+P}),X.add({x:N+K,y:y+d+K+P}),X.add({x:N+K,y:e-Y})):z>=0&&v>=0?(X.add({x:Q+K,y:y+P}),X.add({x:Q+K,y:y+d-K+P}),X.add({x:N+K,y:y+d-K+P}),X.add({x:N+K,y:e-Y})):(X.add({x:Q+K,y:y-P}),X.add({x:Q+K,y:y+d-K-P}),X.add({x:N+K,y:y+d-K-P}),X.add({x:N+K,y:e+Y})):z>=0&&0>=v?(X.add({x:Q+m,y:y+K}),X.add({x:Q+C+K+m,y:y+K}),X.add({x:Q+C+K+m,y:e+K}),X.add({x:N-W,y:e+K})):0>=z&&v>=0?(X.add({x:Q-m,y:y+K}),X.add({x:Q+C+K-m,y:y+K}),X.add({x:Q+C+K-m,y:e+K}),X.add({x:N+W,y:e+K})):z>=0&&v>=0?(X.add({x:Q+m,y:y+K}),X.add({x:Q+C-K+m,y:y+K}),X.add({x:Q+C-K+m,y:e+K}),X.add({x:N-W,y:e+K})):(X.add({x:Q-m,y:y+K}),X.add({x:Q+C-K-m,y:y+K}),X.add({x:Q+C-K-m,y:e+K}),X.add({x:N+W,y:e+K})),p(X,I)}),R("flex",function(R,H,o){var e=new $,I=R.s("edge.flex")+A(R,o),M=R.s(J),Q=R._40I,d=R._41I,N=g(o,R),T=N.x,x=N.y,W=f(o,R),E=W.x,a=W.y,y=Q instanceof O.Edge,n=d instanceof O.Edge,C=E-T,k=a-x,i=M||y?0:Z(o,Q)/2,D=M||y?0:h(o,Q)/2,l=M||n?0:Z(o,d)/2,r=M||n?0:h(o,d)/2,S=C>0?I:-I,V=k>0?I:-I;return G(C)<G(k)?C>=0&&0>=k?(e.add({x:T+H,y:x-D}),e.add({x:T+H,y:x+V+H-D}),e.add({x:E+H,y:a-V+H+r}),e.add({x:E+H,y:a+r})):0>=C&&k>=0?(e.add({x:T+H,y:x+D}),e.add({x:T+H,y:x+V+H+D}),e.add({x:E+H,y:a-V+H-r}),e.add({x:E+H,y:a-r})):C>=0&&k>=0?(e.add({x:T+H,y:x+D}),e.add({x:T+H,y:x+V-H+D}),e.add({x:E+H,y:a-V-H-r}),e.add({x:E+H,y:a-r})):(e.add({x:T+H,y:x-D}),e.add({x:T+H,y:x+V-H-D}),e.add({x:E+H,y:a-V-H+r}),e.add({x:E+H,y:a+r})):C>=0&&0>=k?(e.add({x:T+i,y:x+H}),e.add({x:T+S+H+i,y:x+H}),e.add({x:E-S+H-l,y:a+H}),e.add({x:E-l,y:a+H})):0>=C&&k>=0?(e.add({x:T-i,y:x+H}),e.add({x:T+S+H-i,y:x+H}),e.add({x:E-S+H+l,y:a+H}),e.add({x:E+l,y:a+H})):C>=0&&k>=0?(e.add({x:T+i,y:x+H}),e.add({x:T+S-H+i,y:x+H}),e.add({x:E-S-H-l,y:a+H}),e.add({x:E-l,y:a+H})):(e.add({x:T-i,y:x+H}),e.add({x:T+S-H-i,y:x+H}),e.add({x:E-S-H+l,y:a+H}),e.add({x:E+l,y:a+H})),p(e,R)}),R("extend.east",function(W,I,v){var c=new $,e=W.s(j)+A(W,v),D=W.s(J),u=g(v,W),Y=W._40I instanceof O.Edge,q=W._41I instanceof O.Edge,P=u.x+(D||Y?0:Z(v,W._40I)/2),C=u.y,b=f(v,W),s=b.x+(D||q?0:Z(v,W._41I)/2),F=b.y,V=N(P,s)+e;return C>F?(c.add({x:P,y:C+I}),c.add({x:V+I,y:C+I}),c.add({x:V+I,y:F-I}),c.add({x:s,y:F-I})):(c.add({x:P,y:C-I}),c.add({x:V+I,y:C-I}),c.add({x:V+I,y:F+I}),c.add({x:s,y:F+I})),p(c,W)}),R("extend.west",function(e,o,Q){var r=new $,b=e.s(j)+A(e,Q),K=e.s(J),R=e._40I instanceof O.Edge,L=e._41I instanceof O.Edge,F=g(Q,e),T=F.x-(K||R?0:Z(Q,e._40I)/2),M=F.y,d=f(Q,e),I=d.x-(K||L?0:Z(Q,e._41I)/2),W=d.y,n=m(T,I)-b;return M>W?(r.add({x:T,y:M+o}),r.add({x:n-o,y:M+o}),r.add({x:n-o,y:W-o}),r.add({x:I,y:W-o})):(r.add({x:T,y:M-o}),r.add({x:n-o,y:M-o}),r.add({x:n-o,y:W+o}),r.add({x:I,y:W+o})),p(r,e)}),R("extend.north",function(z,o,D){var x=new $,_=z.s(j)+A(z,D),k=z.s(J),C=z._40I instanceof O.Edge,G=z._41I instanceof O.Edge,L=g(D,z),Q=L.x,M=L.y-(k||C?0:h(D,z._40I)/2),E=f(D,z),u=E.x,I=E.y-(k||G?0:h(D,z._41I)/2),l=m(M,I)-_;return Q>u?(x.add({y:M,x:Q+o}),x.add({y:l-o,x:Q+o}),x.add({y:l-o,x:u-o}),x.add({y:I,x:u-o})):(x.add({y:M,x:Q-o}),x.add({y:l-o,x:Q-o}),x.add({y:l-o,x:u+o}),x.add({y:I,x:u+o})),p(x,z)}),R("extend.south",function(P,u,Y){var I=new $,m=P.s(j)+A(P,Y),L=P.s(J),Z=P._40I instanceof O.Edge,S=P._41I instanceof O.Edge,R=g(Y,P),U=R.x,M=R.y+(L||Z?0:h(Y,P._40I)/2),d=f(Y,P),e=d.x,D=d.y+(L||S?0:h(Y,P._41I)/2),K=N(M,D)+m;return U>e?(I.add({y:M,x:U+u}),I.add({y:K+u,x:U+u}),I.add({y:K+u,x:e-u}),I.add({y:D,x:e-u})):(I.add({y:M,x:U-u}),I.add({y:K+u,x:U-u}),I.add({y:K+u,x:e+u}),I.add({y:D,x:e+u})),p(I,P)});var _=function(X,A,y,v,S){if(v.sort(function(D,o){var K=D.getSourceAgent()===A?D.getTargetAgent():D.getSourceAgent(),r=o.getSourceAgent()===A?o.getTargetAgent():o.getSourceAgent(),G=K.p(),c=r.p();if(y===q||y===w){if(G.y>c.y)return 1;if(G.y<c.y)return-1}else{if(G.x>c.x)return 1;if(G.x<c.x)return-1}return d.sortFunc(D.getId(),o.getId())}),S){for(var P,u,W,i=X.getSourceAgent(),F=X.getTargetAgent(),t=0;t<v.size();t++){var Q=v.get(t);Q.getSourceAgent()===i&&Q.getTargetAgent()===F||Q.getTargetAgent()===i&&Q.getSourceAgent()===F?(u||(u=new $),u.add(Q,0)):u?(W||(W=new $),W.add(Q)):(P||(P=new $),P.add(Q))}v.clear(),P&&v.addAll(P),u&&v.addAll(u),W&&v.addAll(W)}var n=v.indexOf(X),_=v.size(),H=X.s(s);return{side:y,index:n,size:_,offset:-H*(_-1)/2+H*n}},F=function(X,J,q,z,s){var n=J.s(I);return _(J,q,z,q.getAgentEdges().toList(function(r){return X.isVisible(r)&&r.s(I)===n}),s)},r=function(S,A){var N=S.getSourceAgent()===A?S.getTargetAgent():S.getSourceAgent(),r=A.p(),Z=N.p(),n=Z.x-r.x,P=Z.y-r.y;return n>0&&G(P)<=n?w:0>n&&G(P)<=-n?q:P>0&&G(n)<=P?V:D},S=function(d,s,$){var V=s.s(I),C=r(s,$);return _(s,$,C,$.getAgentEdges().toList(function(Z){return d.isVisible(Z)&&Z.s(I)===V&&r(Z,$)===C}))},U=function(W,M){var T=W.getSourceAgent()===M,g=T?W.getTargetAgent():W.getSourceAgent(),B=M.p(),t=g.p();return T?B.y>t.y?D:V:B.x<t.x?w:q},P=function(s,H,F){var h=H.s(I),t=U(H,F);return _(H,F,t,F.getAgentEdges().toList(function(P){return s.isVisible(P)&&P.s(I)===h&&U(P,F)===t}),t===w||t===V)},B=function(r,O){var T=r.getSourceAgent()===O,y=T?r.getTargetAgent():r.getSourceAgent(),$=O.p(),E=y.p();return T?$.x<E.x?w:q:$.y>E.y?D:V},L=function(O,A,r){var T=A.s(I),Y=B(A,r);return _(A,r,Y,r.getAgentEdges().toList(function(b){return O.isVisible(b)&&b.s(I)===T&&B(b,r)===Y}),Y===w||Y===V)},u=function(Q,v,W){var _=Q.getSourceAgent(),z=Q.getTargetAgent(),y=_.getId()>z.getId(),f=y?z:_,H=y?_:z,u=f.p(),K=H.p(),B=W(v,Q,f),I=W(v,Q,H),i=Q.s(J),M=i?0:Z(v,f)/2,T=i?0:Z(v,H)/2,b=i?0:h(v,f)/2,r=i?0:h(v,H)/2,L=B.offset,a=I.offset,A=B.side,S=I.side,C=new $;return A===D?(C.add({x:u.x+L,y:u.y-b}),C.add({x:u.x+L,y:K.y+a}),S===q?C.add({x:K.x-T,y:K.y+a}):C.add({x:K.x+T,y:K.y+a})):A===V?(C.add({x:u.x+L,y:u.y+b}),C.add({x:u.x+L,y:K.y+a}),S===q?C.add({x:K.x-T,y:K.y+a}):C.add({x:K.x+T,y:K.y+a})):A===q?(C.add({x:u.x-M,y:u.y+L}),C.add({x:K.x+a,y:u.y+L}),S===V?C.add({x:K.x+a,y:K.y+r}):C.add({x:K.x+a,y:K.y-r})):A===w&&(C.add({x:u.x+M,y:u.y+L}),C.add({x:K.x+a,y:u.y+L}),S===V?C.add({x:K.x+a,y:K.y+r}):C.add({x:K.x+a,y:K.y-r})),y&&C.reverse(),p(C,Q)};R("ortho2",function(L,A,j){var v,X,u=L.s(J),P=L.s("edge.ortho"),f=L.getSourceAgent(),i=L.getTargetAgent(),E=f.getId()>i.getId(),H=E?i:f,K=E?f:i,O=H.p(),d=K.p(),o=S(j,L,H),N=S(j,L,K),_=u?0:Z(j,H)/2,I=u?0:h(j,H)/2,x=u?0:Z(j,K)/2,b=u?0:h(j,K)/2,T=new $,G=o.offset,k=N.offset,U=o.side;return U===w?(v=d.y>O.y?-G:G,X=O.x+_+(d.x-x-O.x-_)*P,T.add({x:O.x+_,y:O.y+G}),T.add({x:X+v,y:O.y+G}),T.add({x:X+v,y:d.y+k}),T.add({x:d.x-x,y:d.y+k})):U===q?(v=d.y>O.y?-G:G,X=O.x-_-(O.x-_-d.x-x)*P,T.add({x:O.x-_,y:O.y+G}),T.add({x:X-v,y:O.y+G}),T.add({x:X-v,y:d.y+k}),T.add({x:d.x+x,y:d.y+k})):U===V?(v=d.x>O.x?-G:G,X=O.y+I+(d.y-b-O.y-I)*P,T.add({x:O.x+G,y:O.y+I}),T.add({x:O.x+G,y:X+v}),T.add({x:d.x+k,y:X+v}),T.add({x:d.x+k,y:d.y-b})):U===D&&(v=d.x>O.x?-G:G,X=O.y-I-(O.y-I-d.y-b)*P,T.add({x:O.x+G,y:O.y-I}),T.add({x:O.x+G,y:X-v}),T.add({x:d.x+k,y:X-v}),T.add({x:d.x+k,y:d.y+b})),E&&T.reverse(),p(T,L)},!0),R("flex2",function(E,m,z){var j,Q=E.getSourceAgent(),N=E.getTargetAgent(),f=Q.getId()>N.getId(),F=f?N:Q,A=f?Q:N,r=F.p(),n=A.p(),M=S(z,E,F),y=S(z,E,A),R=E.s(J),k=E.s("edge.flex")+(M.size-1)/2*E.s(s),H=R?0:Z(z,F)/2,v=R?0:h(z,F)/2,I=R?0:Z(z,A)/2,t=R?0:h(z,A)/2,B=new $,T=M.offset,G=y.offset,_=M.side;return _===w?(j=n.y>r.y?-T:T,B.add({x:r.x+H,y:r.y+T}),B.add({x:r.x+H+k+j,y:r.y+T}),B.add({x:n.x-I-k+j,y:n.y+G}),B.add({x:n.x-I,y:n.y+G})):_===q?(j=n.y>r.y?-T:T,B.add({x:r.x-H,y:r.y+T}),B.add({x:r.x-H-k-j,y:r.y+T}),B.add({x:n.x+I+k-j,y:n.y+G}),B.add({x:n.x+I,y:n.y+G})):_===V?(j=n.x>r.x?-T:T,B.add({x:r.x+T,y:r.y+v}),B.add({x:r.x+T,y:r.y+v+k+j}),B.add({x:n.x+G,y:n.y-t-k+j}),B.add({x:n.x+G,y:n.y-t})):_===D&&(j=n.x>r.x?-T:T,B.add({x:r.x+T,y:r.y-v}),B.add({x:r.x+T,y:r.y-v-k-j}),B.add({x:n.x+G,y:n.y+t+k-j}),B.add({x:n.x+G,y:n.y+t})),f&&B.reverse(),p(B,E)},!0),R("extend.north2",function(R,A,q){var x=R.getSourceAgent(),d=R.getTargetAgent(),S=x.getId()>d.getId(),M=S?d:x,f=S?x:d,N=M.p(),E=f.p(),l=F(q,R,M,D),i=F(q,R,f,D,!0),O=R.s(J),r=O?0:h(q,M)/2,Q=O?0:h(q,f)/2,g=l.offset,u=i.offset,V=R.s(j)+(l.size-1)/2*R.s(s),a=m(N.y-r,E.y-Q)-V+(N.x<E.x?g:-g),G=new $;return G.add({x:N.x+g,y:N.y-r}),G.add({x:N.x+g,y:a}),G.add({x:E.x+u,y:a}),G.add({x:E.x+u,y:E.y-Q}),S&&G.reverse(),p(G,R)},!0),R("extend.south2",function(I,S,X){var g=I.getSourceAgent(),M=I.getTargetAgent(),E=g.getId()>M.getId(),q=E?M:g,k=E?g:M,x=q.p(),Q=k.p(),d=F(X,I,q,V),a=F(X,I,k,V,!0),v=I.s(J),l=v?0:h(X,q)/2,m=v?0:h(X,k)/2,O=d.offset,H=a.offset,Z=I.s(j)+(d.size-1)/2*I.s(s),u=N(x.y+l,Q.y+m)+Z+(x.x>Q.x?O:-O),D=new $;return D.add({x:x.x+O,y:x.y+l}),D.add({x:x.x+O,y:u}),D.add({x:Q.x+H,y:u}),D.add({x:Q.x+H,y:Q.y+m}),E&&D.reverse(),p(D,I)},!0),R("extend.west2",function(_,A,h){var g=_.getSourceAgent(),b=_.getTargetAgent(),N=g.getId()>b.getId(),e=N?b:g,l=N?g:b,n=e.p(),y=l.p(),o=F(h,_,e,D),c=F(h,_,l,D,!0),E=_.s(J),d=E?0:Z(h,e)/2,u=E?0:Z(h,l)/2,H=o.offset,S=c.offset,U=_.s(j)+(o.size-1)/2*_.s(s),i=m(n.x-d,y.x-u)-U+(n.y<y.y?H:-H),W=new $;return W.add({x:n.x-d,y:n.y+H}),W.add({x:i,y:n.y+H}),W.add({x:i,y:y.y+S}),W.add({x:y.x-u,y:y.y+S}),N&&W.reverse(),p(W,_)},!0),R("extend.east2",function(c,y,A){var w=c.getSourceAgent(),C=c.getTargetAgent(),W=w.getId()>C.getId(),X=W?C:w,k=W?w:C,Q=X.p(),P=k.p(),z=F(A,c,X,D),d=F(A,c,k,D,!0),Y=c.s(J),i=Y?0:Z(A,X)/2,t=Y?0:Z(A,k)/2,L=z.offset,S=d.offset,o=c.s(j)+(z.size-1)/2*c.s(s),M=N(Q.x+i,P.x+t)+o+(Q.y>P.y?L:-L),H=new $;return H.add({x:Q.x+i,y:Q.y+L}),H.add({x:M,y:Q.y+L}),H.add({x:M,y:P.y+S}),H.add({x:P.x+t,y:P.y+S}),W&&H.reverse(),p(H,c)},!0),R("v.h2",function(y,E,o){return u(y,o,P)},!0),R("h.v2",function(d,Z,l){return u(d,l,L)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);